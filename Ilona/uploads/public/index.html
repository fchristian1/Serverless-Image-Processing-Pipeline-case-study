<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bilder Hochladen</title>
</head>
<body>
    <h1>Bilder Hochladen</h1>
    <form id="uploadForm" enctype="multipart/form-data">
        <label for="fileInput">W채hlen Sie ein Bild aus:</label><br>
        <input type="file" id="fileInput" name="file" accept="image/*"><br><br>
        <button type="submit">Bild Hochladen</button>
    </form>

    <div id="uploadResult"></div>

    <script>
        // Event Listener f체r das Formular
        document.getElementById('uploadForm').addEventListener('submit', function(e) {
            e.preventDefault();  // Verhindert das Standardverhalten des Formulars

            var file = document.getElementById('fileInput').files[0];  // Das ausgew채hlte Bild

            if (!file) {
                alert("Bitte w채hlen Sie ein Bild aus.");
                return;
            }

            // FormData-Objekt, um das Bild an den Server zu senden
            var formData = new FormData();
            formData.append("file", file);

            // Sende das Bild an das Backend (Node.js-Server)
            fetch("/upload", {
                method: "POST",
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                // Zeige das Ergebnis der Uploads an (z. B. Bild-URL)
                document.getElementById("uploadResult").innerHTML = "Bild erfolgreich hochgeladen: <a href='" + data.url + "'>Zur Ansicht</a>";
            })
            .catch(error => {
                console.error("Fehler beim Hochladen des Bildes:", error);
                document.getElementById("uploadResult").innerHTML = "Fehler beim Hochladen des Bildes.";
            });
        });
    </script>
</body>
</html>
